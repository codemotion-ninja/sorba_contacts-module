!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ionic-native/keyboard/ngx"),require("@ionic-native/keyboard/ngx/index"),require("@ionic-native/in-app-browser/ngx"),require("@ionic-native/in-app-browser/ngx/index"),require("graphql-tag"),require("apollo-angular"),require("immutability-helper"),require("@sorba-app/sorba-ui-components"),require("@angular/common"),require("@agm/core"),require("@angular/router"),require("@ionic/angular"),require("@angular/forms"),require("rxjs/operators"),require("rxjs"),require("@ionic-native/document-viewer/ngx"),require("@ionic-native/file/ngx"),require("@ionic-native/file-opener/ngx"),require("@angular/cdk/scrolling"),require("@angular/platform-browser"),require("@angular/core")):"function"==typeof define&&define.amd?define("contacts",["exports","@ionic-native/keyboard/ngx","@ionic-native/keyboard/ngx/index","@ionic-native/in-app-browser/ngx","@ionic-native/in-app-browser/ngx/index","graphql-tag","apollo-angular","immutability-helper","@sorba-app/sorba-ui-components","@angular/common","@agm/core","@angular/router","@ionic/angular","@angular/forms","rxjs/operators","rxjs","@ionic-native/document-viewer/ngx","@ionic-native/file/ngx","@ionic-native/file-opener/ngx","@angular/cdk/scrolling","@angular/platform-browser","@angular/core"],t):t(e.contacts={},e["@ionic-native/keyboard/ngx"],e["@ionic-native/keyboard/ngx/index"],e["@ionic-native/in-app-browser/ngx"],e["@ionic-native/in-app-browser/ngx/index"],e["graphql-tag"],e["apollo-angular"],e["immutability-helper"],e["@sorba-app/sorba-ui-components"],e.ng.common,e["@agm/core"],e.ng.router,e["@ionic/angular"],e.ng.forms,e.rxjs.operators,e.rxjs,e["@ionic-native/document-viewer/ngx"],e["@ionic-native/file/ngx"],e["@ionic-native/file-opener/ngx"],e.ng.cdk.scrolling,e.ng.platformBrowser,e.ng.core)}(this,function(e,t,n,i,o,r,a,s,c,l,p,d,u,h,f,m,b,g,y,v,x,w){"use strict";r=r&&r.hasOwnProperty("default")?r["default"]:r,s=s&&s.hasOwnProperty("default")?s["default"]:s;var I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function k(e,t){function n(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var C=function(){return(C=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function M(t,a,s,c){return new(s=s||Promise)(function(e,n){function i(e){try{r(c.next(e))}catch(t){n(t)}}function o(e){try{r(c["throw"](e))}catch(t){n(t)}}function r(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(i,o)}r((c=c.apply(t,a||[])).next())})}function j(i,o){var r,a,s,e,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function n(e){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,a&&(s=2&e[0]?a["return"]:e[0]?a["throw"]||((s=a["return"])&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){c.label=e[1];break}if(6===e[0]&&c.label<s[1]){c.label=s[1],s=e;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(e);break}s[2]&&c.ops.pop(),c.trys.pop();continue}e=o.call(i,c)}catch(t){e=[6,t],a=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var P="contacts",A="contact",D="notifications",$="Contacts",T="user",H="company",L=[{count:0,type:"all",label:"All contacts",active:!0},{count:0,type:T,label:"User contacts",active:!1},{count:0,type:H,label:"Company contacts",active:!1}],N=[{menuItemIcon:"contact",menuItemName:"Contact list",menuItemLink:"#/contacts/contact",subMenu:[]},{menuItemIcon:"outlook",menuItemName:"Outlook export",menuItemLink:"#/contacts/contact",subMenu:[]},{menuItemIcon:"report",menuItemName:"Reports",menuItemLink:"#/contacts/contact",subMenu:[{subMenuItemName:"Number ranges",subMenuItemLink:"#/contacts/contact"},{subMenuItemName:"Default values",subMenuItemLink:"#/contacts/contact"},{subMenuItemName:"Address import",subMenuItemLink:"#/contacts/contact"}]},{menuItemIcon:"mutations",menuItemName:"Global mutations",menuItemLink:"#/contacts/contact",subMenu:[]},{menuItemIcon:"settings-filled",menuItemName:"Settings",menuItemLink:"#/contacts/contact",subMenu:[{subMenuItemName:"Number ranges",subMenuItemLink:"#/contacts/contact"},{subMenuItemName:"Default values",subMenuItemLink:"#/contacts/contact"},{subMenuItemName:"Address import",subMenuItemLink:"#/contacts/contact"},{subMenuItemName:"Subdivisions",subMenuItemLink:"#/contacts/contact"}]}],_="privacy-policy",O="/assets/docs/2019_AGB_SORBA_EDV_AG.pdf",E="https://support.sorba.ch/hc/de",q={clearcache:"yes",clearsessioncache:"yes",hideurlbar:"yes",location:"no",zoom:"no"},B="mobile",F="android",z="ios",V="mobileweb",U="desktop",R="tablet";function W(e){return e.join(" ").trim().replace(/\s{2,}/g," ")}var G=(K.prototype.searchBySymbol=function(e,t){var l=t.toLowerCase();return e.map(function(e){var t,n,i,o=W([e.first_name,e.name]);try{for(var r=function s(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(Object.keys(e)),a=r.next();!a.done;a=r.next())if(e[i=a.value]&&(""+e[i]).toLowerCase().includes(l))return C({},e,{subText:e[i],text:o})}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=r["return"])&&n.call(r)}finally{if(t)throw t.error}}}).filter(function(e){return!!e})},K.prototype.getMobileHeight=function(e){return"calc(100vh - var(--header-height) - var(--ion-safe-area-top, 0) - "+e+")"},K.prototype.getActiveDomain=function(){return this.appService.getActiveDomain().pipe(f.map(function(e){return e.name}))},K.decorators=[{type:w.Injectable,args:[{providedIn:"root"}]}],K.ctorParameters=function(){return[{type:undefined,decorators:[{type:w.Inject,args:["appService"]}]}]},K.ngInjectableDef=w.defineInjectable({factory:function(){return new K(w.inject("appService"))},token:K,providedIn:"root"}),K);function K(e){this.appService=e,this.isMobile=window.innerWidth<768,this.isDesktop=1023<window.innerWidth,this.isTablet=768<=window.innerWidth&&window.innerWidth<1024,this.desktopHeight="calc(100vh - var(--header-height) - var(--ion-safe-area-top, 0) - 277px)",this.activeContact=new m.BehaviorSubject(null),this.headerData=new m.BehaviorSubject({title:$,path:"/"})}var Q=(Y.prototype.setKeyboardMode=function(){return M(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,this.platform.is("desktop")];case 1:return e.sent()||this.keyboard.setResizeMode(t.KeyboardResizeMode.Native),[2]}})})},Y.decorators=[{type:w.Injectable,args:[{providedIn:"root"}]}],Y.ctorParameters=function(){return[{type:t.Keyboard},{type:u.Platform}]},Y.ngInjectableDef=w.defineInjectable({factory:function(){return new Y(w.inject(n.Keyboard),w.inject(u.Platform))},token:Y,providedIn:"root"}),Y);function Y(e,t){var n=this;this.keyboard=e,this.platform=t,this.keyboardHeight$=new m.BehaviorSubject(null),window.addEventListener("keyboardDidHide",function(){return n.keyboardHeight$.next(null)}),window.addEventListener("keyboardWillShow",function(e){return n.keyboardHeight$.next(e.keyboardHeight)})}var J=(X.prototype.redirect=function(e,t){e.preventDefault(),this.iab.create(t,"_blank",q)},X.decorators=[{type:w.Injectable,args:[{providedIn:"root"}]}],X.ctorParameters=function(){return[{type:i.InAppBrowser}]},X.ngInjectableDef=w.defineInjectable({factory:function(){return new X(w.inject(o.InAppBrowser))},token:X,providedIn:"root"}),X);function X(e){this.iab=e}var Z=(ee.prototype.isMobileWeb=function(){return this.plt.is(V)},ee.prototype.isDesktop=function(){return this.plt.is(U)},ee.prototype.isMobileApp=function(){return this.plt.is(B)},ee.prototype.isIOS=function(){return this.plt.is(z)},ee.prototype.isAndroid=function(){return this.plt.is(F)},ee.prototype.isTablet=function(){return this.plt.is(R)},ee.decorators=[{type:w.Injectable,args:[{providedIn:"root"}]}],ee.ctorParameters=function(){return[{type:u.Platform}]},ee.ngInjectableDef=w.defineInjectable({factory:function(){return new ee(w.inject(u.Platform))},token:ee,providedIn:"root"}),ee);function ee(e){this.plt=e}var te,ne=r(fe=fe||S(["\n    fragment ContactAppInfo on AppContact {\n  first_name\n  name\n  id\n}\n    "],["\n    fragment ContactAppInfo on AppContact {\n  first_name\n  name\n  id\n}\n    "])),ie=r(me=me||S(["\n    fragment ContactAppAddress on AppContact {\n  address\n  postal_code\n  city\n  po_box\n}\n    "],["\n    fragment ContactAppAddress on AppContact {\n  address\n  postal_code\n  city\n  po_box\n}\n    "])),oe=r(be=be||S(["\n    fragment SearchContactAppInfo on AppContact {\n  business_number\n  mobile_number\n  first_name\n  private_number\n  fax\n  website\n  logical20\n  name\n  id\n  ...ContactAppAddress\n}\n    ",""],["\n    fragment SearchContactAppInfo on AppContact {\n  business_number\n  mobile_number\n  first_name\n  private_number\n  fax\n  website\n  logical20\n  name\n  id\n  ...ContactAppAddress\n}\n    ",""]),ie),re=r(ge=ge||S(["\n    fragment AppProjectInfo on AppProject {\n  id\n  name\n  description\n  order_no\n  offer_total\n  responsible\n  denied\n  done\n  warranty\n  in_progress\n  do_not_calculate\n  acquisition\n  replicating\n  archives\n  offer\n}\n    "],["\n    fragment AppProjectInfo on AppProject {\n  id\n  name\n  description\n  order_no\n  offer_total\n  responsible\n  denied\n  done\n  warranty\n  in_progress\n  do_not_calculate\n  acquisition\n  replicating\n  archives\n  offer\n}\n    "])),ae=r(ye=ye||S(["\n    query ContactApps($domain: String!, $page: UInt!, $perPage: UInt!, $filter: ContactAppFilterInput) {\n  contactApps(domain: $domain, page: $page, perPage: $perPage, filter: $filter) {\n    items {\n      ...ContactAppInfo\n    }\n    pageInfo {\n      totalCount\n    }\n    aggregatedInfo {\n      companiesContactsCount\n      usersContactsCount\n    }\n  }\n}\n    ",""],["\n    query ContactApps($domain: String!, $page: UInt!, $perPage: UInt!, $filter: ContactAppFilterInput) {\n  contactApps(domain: $domain, page: $page, perPage: $perPage, filter: $filter) {\n    items {\n      ...ContactAppInfo\n    }\n    pageInfo {\n      totalCount\n    }\n    aggregatedInfo {\n      companiesContactsCount\n      usersContactsCount\n    }\n  }\n}\n    ",""]),ne),se=(k(ce,te=a.Query),ce.decorators=[{type:w.Injectable,args:[{providedIn:"root"}]}],ce.ngInjectableDef=w.defineInjectable({factory:function(){return new ce(w.inject(a.Apollo))},token:ce,providedIn:"root"}),ce);function ce(){var e=null!==te&&te.apply(this,arguments)||this;return e.document=ae,e}var le,pe=r(ve=ve||S(["\n    query SearchContacts($domain: String!, $page: UInt!, $perPage: UInt!, $filter: ContactAppFilterInput) {\n  contactApps(domain: $domain, page: $page, perPage: $perPage, filter: $filter) {\n    items {\n      ...SearchContactAppInfo\n    }\n  }\n}\n    ",""],["\n    query SearchContacts($domain: String!, $page: UInt!, $perPage: UInt!, $filter: ContactAppFilterInput) {\n  contactApps(domain: $domain, page: $page, perPage: $perPage, filter: $filter) {\n    items {\n      ...SearchContactAppInfo\n    }\n  }\n}\n    ",""]),oe),de=(k(ue,le=a.Query),ue.decorators=[{type:w.Injectable,args:[{providedIn:"root"}]}],ue.ngInjectableDef=w.defineInjectable({factory:function(){return new ue(w.inject(a.Apollo))},token:ue,providedIn:"root"}),ue);function ue(){var e=null!==le&&le.apply(this,arguments)||this;return e.document=pe,e}var he,fe,me,be,ge,ye,ve,xe,we=r(xe=xe||S(["\n    query ContactAppByID($id: ID!, $domain: String!) {\n  contactAppById(id: $id, domain: $domain) {\n    ...SearchContactAppInfo\n    memo\n    projects {\n      ...AppProjectInfo\n    }\n    documents\n    contacts {\n      ...ContactAppInfo\n      ...ContactAppAddress\n    }\n    geocode_address {\n      lat\n      lon\n    }\n  }\n}\n    ","\n","\n","\n",""],["\n    query ContactAppByID($id: ID!, $domain: String!) {\n  contactAppById(id: $id, domain: $domain) {\n    ...SearchContactAppInfo\n    memo\n    projects {\n      ...AppProjectInfo\n    }\n    documents\n    contacts {\n      ...ContactAppInfo\n      ...ContactAppAddress\n    }\n    geocode_address {\n      lat\n      lon\n    }\n  }\n}\n    ","\n","\n","\n",""]),oe,re,ne,ie),Ie=(k(ke,he=a.Query),ke.decorators=[{type:w.Injectable,args:[{providedIn:"root"}]}],ke.ngInjectableDef=w.defineInjectable({factory:function(){return new ke(w.inject(a.Apollo))},token:ke,providedIn:"root"}),ke);function ke(){var e=null!==he&&he.apply(this,arguments)||this;return e.document=we,e}var Ce=(Object.defineProperty(Me.prototype,"menuFloat",{get:function(){return this.windowWidth<1024&&767<this.windowWidth},enumerable:!0,configurable:!0}),Object.defineProperty(Me.prototype,"desktopHeight",{get:function(){if(this.isMobile)return this.platform&&this.platform.height()&&this.platform.height()-this.keyboardHeight;var e=this.rightPanel&&this.rightPanel.nativeElement&&this.rightPanel.nativeElement.getElementsByClassName("contact-details-body"),t=e&&e[0]&&120<e[0].offsetHeight&&e[0].offsetHeight-120;return t||0},enumerable:!0,configurable:!0}),Me.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},Me.prototype.ngAfterViewInit=function(){this.toggleMenu(),this.keyboardHelper.setKeyboardMode(),this.getKeyBoardHeight()},Me.prototype.ngAfterContentChecked=function(){this.cd.detectChanges()},Me.prototype.getOffset=function(e){return e&&e[0]&&e[0].offsetHeight||0},Me.prototype.getKeyBoardHeight=function(){var i=this;setTimeout(function(){var e=i.document.getElementsByClassName("main-header"),t=i.sideMenu.nativeElement.getElementsByClassName("menu-float-button"),n=i.getOffset(t);i.keyboardHeight+=96+i.getOffset(e),i.keyboardHelper.keyboardHeight$.pipe(f.takeUntil(i.unsubscribe$)).subscribe(function(e){e?i.keyboardHeight-=n:i.keyboardHeight+=n})})},Me.prototype.updateOnChangeDomain=function(){var t=this;this.contactsHelper.getActiveDomain().pipe(f.takeUntil(this.unsubscribe$)).subscribe(function(e){t.resetSearch=e,t.resetVariables(e),t.contactsQueryRef.refetch(t.gqlVariables).then(function(){t.menuItems.forEach(function(t){t.active=L.find(function(e){return e.type===t.type}).active})})})},Me.prototype.setContactsGql=function(){return M(this,void 0,void 0,function(){var t,n=this;return j(this,function(e){switch(e.label){case 0:return[4,this.contactsHelper.getActiveDomain().pipe(f.take(1)).toPromise()];case 1:return t=e.sent(),this.resetVariables(t),this.contactsQueryRef=this.contactListGQL.watch(this.gqlVariables),this.contactsQueryRef.valueChanges.pipe(f.filter(function(e){return!e.loading}),f.switchMap(function(e){var t=e.data,n=e.errors;return n?m.throwError(n):m.of(t.contactApps)}),f.takeUntil(this.unsubscribe$)).subscribe(function(e){n.isLoading=!1;var t=n.countContacts(e);!function i(e,n){return e.sort(function(e,t){return e[n].localeCompare(t[n])})}(t,"text"),n.contactsList=t,n.selectFirstContact()},function(){n.isLoading=!1}),[2]}})})},Me.prototype.selectContactItem=function(t){return M(this,void 0,void 0,function(){return j(this,function(e){return this.contactsHelper.activeContact.next(t),this.isMobile?[2,this.router.navigate(["/"+P+"/"+t.id])]:[2]})})},Me.prototype.searchEvent=function(e){this.searchText=e},Me.prototype.fetchMore=function(){this.contactsQueryRef.fetchMore({variables:{page:++this.gqlVariables.page},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?s(e,{contactApps:{items:{$push:n.contactApps.items},pageInfo:{$merge:n.contactApps.pageInfo},aggregatedInfo:{$merge:n.contactApps.aggregatedInfo}}}):e}})},Me.prototype.filterByMenu=function(e){switch(this.resetSearch=e,this.gqlVariables.page=1,e.type){case H:this.gqlVariables.filter.logical20=!0;break;case T:this.gqlVariables.filter.logical20=!1;break;default:delete this.gqlVariables.filter.logical20}this.contactsQueryRef.refetch(this.gqlVariables)},Me.prototype.countContacts=function(e){var t=e.items,n=e.pageInfo,i=e.aggregatedInfo;return this.setMenuCount({companyCount:i.companiesContactsCount,userCount:i.usersContactsCount,totalCount:n.totalCount}),t.map(function(e){var t=W([e.first_name,e.name])||"[unnamed]";return Object.assign({},e,{text:t})})},Me.prototype.setMenuCount=function(t){this.totalCountContacts=t.totalCount,this.menuItems.forEach(function(e){switch(e.type){case T:e.count=t.userCount;break;case H:e.count=t.companyCount;break;default:e.count=t.userCount+t.companyCount}})},Me.prototype.selectFirstContact=function(){!this.isMobile&&0<this.contactsList.length&&this.gqlVariables.page<2&&this.selectContactItem(this.contactsList[0])},Me.prototype.toggleMenu=function(){var t=this;this.keyboardHelper.keyboardHeight$.pipe(f.takeUntil(this.unsubscribe$)).subscribe(function(e){t.mobileHeight=t.contactsHelper.getMobileHeight(e?"96px":"152px"),t.showMenu=!!e})},Me.prototype.resetVariables=function(e){this.gqlVariables={page:1,perPage:this.itemsPerPage,domain:e,filter:{}}},Me.decorators=[{type:w.Component,args:[{selector:"lib-contacts",template:'<div #sideMenu>\n  <sr-sidemenu\n    *ngIf="!showMenu"\n    openMenuText="menu"\n    closeMenuText="close"\n    [data]="menuData"\n    [windowWidth]="windowWidth"\n    [isMenuFloat]="menuFloat"\n  ></sr-sidemenu>\n</div>\n\n<sr-content-card class="contacts-container" *ngIf="!isLoading; else loading">\n  <div class="left-panel">\n    <header class="contacts-list-header">\n      <div class="top-block">\n        <lib-selected-menu\n          [items]="menuItems"\n          (selectedEvent)="filterByMenu($event)"\n        ></lib-selected-menu>\n        <sr-button\n          *ngIf="!showMenu"\n          buttonType="icon"\n          iconName="contact-add"\n          class="contact-add"\n        ></sr-button>\n      </div>\n\n      <lib-search-contacts\n        [scrollHeight]="desktopHeight"\n        [gqlVariables]="gqlVariables"\n        [resetSearch]="resetSearch"\n        (searchEvent)="searchEvent($event)"\n        (selectContactItem)="selectContactItem($event)"\n      ></lib-search-contacts>\n    </header>\n\n    <sr-section-list\n      *ngIf="!searchText.length && contactsList.length; else noData"\n      [scrollHeight]="desktopHeight"\n      [totalCountListItems]="totalCountContacts"\n      (fetchMore)="fetchMore()"\n      [activeItemId]="(contactsHelper.activeContact | async)?.id"\n      (selectListItem)="selectContactItem($event)"\n      [listItems]="contactsList"\n      [hasActions]="true"\n    ></sr-section-list>\n\n    <ng-template #noData>\n      <p class="empty-contacts" *ngIf="!searchText.length">No data ...</p>\n    </ng-template>\n  </div>\n\n  \x3c!-- user details column--\x3e\n  <div class="right-panel" #rightPanel *ngIf="!isMobile">\n    <div class="contact-details-body">\n      <lib-contact-detail></lib-contact-detail>\n    </div>\n  </div>\n</sr-content-card>\n\n<ng-template #loading>\n  <sr-progress-spinner backdropColor="#fff"></sr-progress-spinner>\n</ng-template>\n',encapsulation:w.ViewEncapsulation.None,changeDetection:w.ChangeDetectionStrategy.OnPush,styles:[".contacts-list-header .top-block{display:flex;align-items:center;justify-content:space-between;padding:14px 8px 14px 12px}.contacts-list-header .mat-button-wrapper sr-text{order:-1}.contacts-list-header .mat-icon-button.text{font-weight:600}.contact-add .mat-icon-button.icon{color:var(--sr-base-color)}.search-field .input-wrapper{display:flex;align-items:center;height:48px;padding:4px 16px 4px 28px;border-top:1px solid var(--sr-border-color);border-bottom:1px solid var(--sr-border-color)}.search-field .input-wrapper sr-icon{color:var(--base-gray-64)}.search-field .input-wrapper input{width:100%;padding:0;border:0;font-weight:600}.search-field .input-wrapper .search-icon{margin-right:16px}.search-field .no-data{display:block;padding:16px 16px 16px 68px}@media (max-width:767px){.contacts-container .contact-add{position:fixed;right:8px;bottom:8px;z-index:71}}ion-spinner{margin:0 auto;display:block}@media (min-width:768px){.contacts-container .content-card{display:flex}.contacts-container .left-panel{width:263px;border-right:1px solid var(--sr-border-color);border-bottom-left-radius:5px;overflow:hidden}.contacts-container .right-panel{width:calc(100% - 263px)}.contacts-list-header .top-block{height:72px;padding:3px 16px 4px 24px}.filter-menu{min-width:226px;max-width:300px;margin:8px 0 0 -24px}}.empty-contacts{text-align:center}.info-section{padding:16px 12px;border-top:1px solid var(--sr-border-color)}.info-section .section-header{display:flex;align-items:center;justify-content:space-between;min-height:40px}.info-section .section-header sr-heading{color:var(--sr-light-text-color)}.info-section .section-header .header-actions sr-button{margin-left:8px}.info-section .section-body{margin:10px 0 8px}.info-section .section-body .button-wrapper{padding-left:44px;margin-top:21px}.info-section .section-info-field{display:flex}.info-section .section-info-field:not(:first-child){margin-top:11px}.info-section .section-info-field .field-content{flex-grow:1}.info-section .section-info-field .field-content.contact{display:flex}.info-section .section-info-field .field-content.contact sr-avatar{margin-right:12px}.info-section .section-info-field .field-content.contact sr-link{display:block;margin-top:6px}.info-section .section-info-field .field-content.project{display:flex}.info-section .section-info-field .field-content.project sr-icon{color:var(--base-gray-64)}.info-section .section-info-field .field-content.project sr-price-label{display:inline-block;margin:6px 0 0}.info-section .section-info-field .field-content.project .icon-wrapper{min-width:32px;margin-right:12px;text-align:center}.info-section .section-info-field .field-content.project .divider{display:none}.info-section .section-info-field .field-content.project .field{display:block}.info-section .section-info-field .field-content.contact,.info-section .section-info-field .field-content.contact .info,.info-section .section-info-field .field-content.contact .text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.documents-table .sr-header-row{padding-right:40px}.documents-table .icon-cell{min-width:36px;max-width:36px;color:var(--base-gray-64)}.documents-table .name-cell{flex:2}.documents-table .last-modified-cell{min-width:110px}.documents-table .size-cell{display:none}@media (min-width:768px){.info-section{padding:23px 24px 21px}.info-section .section-body{margin:10px 0 6px}.info-section .section-info-field .field-content.project sr-price-label{display:inline-block;margin:0}.info-section .section-info-field .field-content.project .project-name{margin-right:5px}.info-section .section-info-field .field-content.project .icon-wrapper{width:32px;display:flex;justify-content:center;margin-right:12px}.info-section .section-info-field .field-content.project .divider{display:inline-block;margin:0 2px;color:var(--sr-light-text-color)}.info-section .section-info-field .field-content.project .field{display:inline-block}.documents-table .name-cell{flex:4}.documents-table .last-modified-cell{min-width:130px}.documents-table .size-cell{display:block}}@media (min-width:1280px){.info-section .section-info-field{position:relative;cursor:pointer}.info-section .section-info-field sr-actions{opacity:0;visibility:hidden;transition:250ms}.info-section .section-info-field:hover sr-actions{opacity:1;visibility:visible}.documents-table sr-table-row{position:relative;cursor:pointer}.documents-table sr-table-row sr-actions{opacity:0;visibility:hidden;transition:250ms}.documents-table sr-table-row:hover sr-actions{opacity:1;visibility:visible}.documents-table .sr-header-row{padding-right:0}}"]}]}],Me.ctorParameters=function(){return[{type:undefined,decorators:[{type:w.Inject,args:[l.DOCUMENT]}]},{type:G},{type:se},{type:d.Router},{type:w.ChangeDetectorRef},{type:Q},{type:u.Platform}]},Me.propDecorators={rightPanel:[{type:w.ViewChild,args:["rightPanel"]}],sideMenu:[{type:w.ViewChild,args:["sideMenu"]}]},Me);function Me(e,t,n,i,o,r,a){var s=this;this.document=e,this.contactsHelper=t,this.contactListGQL=n,this.router=i,this.cd=o,this.keyboardHelper=r,this.platform=a,this.windowWidth=window.innerWidth,this.menuData=N,this.showMenu=!1,this.menuItems=L.map(function(e){return C({},e)}),this.contactsList=[],this.unsubscribe$=new m.Subject,this.isMobile=this.contactsHelper.isMobile,this.mobileHeight=this.contactsHelper.getMobileHeight("152px"),this.searchText="",this.itemsPerPage=100,this.isLoading=!0,this.keyboardHeight=0,this.setContactsGql().then(function(){s.updateOnChangeDomain()}),this.contactsHelper.headerData.next({title:$,path:"/"})}var je=(Object.defineProperty(Se.prototype,"selectedMenu",{get:function(){var e=this.items.find(function(e){return e.active});return e.label+" ("+e.count+")"},enumerable:!0,configurable:!0}),Se.prototype.clickEvent=function(t){t.active||(this.items.forEach(function(e){e.active=e.type===t.type}),this.selectedEvent.emit(t))},Se.decorators=[{type:w.Component,args:[{selector:"lib-selected-menu",template:'<sr-menu\n  menuButtonType="text"\n  xPosition="after"\n  yPosition="below"\n  [buttonText]="selectedMenu"\n  iconName="chevron-down"\n  customMenuClass="filter-menu"\n>\n  <sr-menu-body>\n    <sr-menu-item\n      (click)="clickEvent(item)"\n      [hasCheckMark]="true"\n      [class.active]="item.active"\n      *ngFor="let item of items"\n      itemsPosition="between"\n    >\n      <sr-text>{{ item.label }} ({{ item.count }})</sr-text>\n    </sr-menu-item>\n  </sr-menu-body>\n</sr-menu>\n',styles:[""]}]}],Se.propDecorators={items:[{type:w.Input}],selectedEvent:[{type:w.Output}]},Se);function Se(){this.selectedEvent=new w.EventEmitter}var Pe=(Ae.prototype.ngOnInit=function(){var t=this;this.appService.getDomains().pipe(f.takeUntil(this.unsubscribe$)).subscribe(function(e){t.domains=e}),this.appService.getActiveDomain().pipe(f.takeUntil(this.unsubscribe$)).subscribe(function(e){t.activeDomain=e})},Ae.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},Ae.prototype.handleChangeDomain=function(e){this.router.navigate(["/"+P]),this.appService.handleChangeDomain(e)},Ae.prototype.getRoot=function(){var t=this;this.headerData$.pipe(f.take(1)).subscribe(function(e){return t.nacCtrl.navigateRoot([e.path])})},Ae.prototype.getNotificationPage=function(){this.router.navigate(["/"+D])},Ae.prototype.logout=function(){this.appService.logout()},Ae.decorators=[{type:w.Component,args:[{selector:"lib-header",template:'<sr-header>\n  <sr-header-inner-block blockPosition="left">\n    <sr-button\n      (clickHandler)="getRoot()"\n      buttonType="icon"\n      iconName="arrow-left"\n    ></sr-button>\n    <sr-heading\n      *ngIf="!isMobile"\n      [headingText]="(headerData$ | async)?.title"\n      headingType="h1"\n    ></sr-heading>\n  </sr-header-inner-block>\n\n  <sr-header-title *ngIf="!isMobile">\n    <sr-icon\n      iconName="c"\n      iconSize="36"\n      isGradientIcon="true"\n      gradientColor="--sr-gradient-cyan"\n    ></sr-icon>\n  </sr-header-title>\n\n  <sr-header-inner-block blockPosition="right">\n    <sr-menu\n      menuButtonType="icon"\n      iconName="notifications"\n      badgeContent="2"\n      xPosition="before"\n      yPosition="below"\n      customMenuClass="notifications header-menu"\n    >\n      <sr-menu-body noPadding="true">\n        <sr-notifications\n          [data]="[\n            {\n              text:\n                \'<b>Michael Klein</b> has shared the <b>Werden Bau</b> project with you.\',\n              time: \'5h\',\n              unread: true\n            },\n            {\n              text: \'You have a new message from <b>Andreas Kolt.</b>\',\n              time: \'Yesterday\',\n              unread: true\n            },\n            {\n              text:\n                \'<b>Martina Müller</b> has shared the <b>Dogo Gartenbau</b> contact with you.\',\n              time: \'May 27\',\n              unread: true\n            },\n            {\n              text: \'You have joined to <b>Sorba Web Container</b>.\',\n              time: \'January 5, 2018\',\n              unread: false\n            }\n          ]"\n        ></sr-notifications>\n      </sr-menu-body>\n      <sr-button\n        buttonType="additional"\n        [isBoxed]="true"\n        (click)="getNotificationPage()"\n        buttonText="Show all"\n      ></sr-button>\n    </sr-menu>\n\n    <sr-menu\n      *ngIf="activeDomain?.name"\n      menuButtonType="avatar"\n      xPosition="before"\n      yPosition="below"\n      [avatarValue]="activeDomain.name.charAt(0)"\n      customMenuClass="domains header-menu"\n    >\n      <sr-menu-header class="main-menu-item">\n        <sr-avatar\n          [avatarSize]="48"\n          [avatarValue]="activeDomain.name.charAt(0)"\n        ></sr-avatar>\n        <sr-text>{{ activeDomain.name }}</sr-text>\n      </sr-menu-header>\n\n      <sr-menu-body>\n        <span *ngFor="let domain of domains">\n          <sr-menu-item\n            *ngIf="activeDomain.name !== domain.name"\n            (click)="handleChangeDomain(domain)"\n          >\n            <sr-avatar\n              [avatarSize]="40"\n              [avatarValue]="domain.name.charAt(0)"\n            ></sr-avatar>\n            <sr-text>{{ domain.name }}</sr-text>\n          </sr-menu-item>\n        </span>\n      </sr-menu-body>\n\n      <sr-menu-footer itemsPosition="end">\n        <sr-button\n          buttonType="primary"\n          buttonText="Sign out"\n          (clickHandler)="logout()"\n        ></sr-button>\n      </sr-menu-footer>\n    </sr-menu>\n  </sr-header-inner-block>\n</sr-header>\n',styles:[""]}]}],Ae.ctorParameters=function(){return[{type:undefined,decorators:[{type:w.Inject,args:["appService"]}]},{type:d.Router},{type:u.NavController},{type:G}]},Ae);function Ae(e,t,n,i){this.appService=e,this.router=t,this.nacCtrl=n,this.contactsHelper=i,this.isMobile=this.contactsHelper.isMobile,this.unsubscribe$=new m.Subject,this.headerData$=this.contactsHelper.headerData}var De=($e.prototype.ngOnChanges=function(e){e.resetSearch&&this.clearInput()},$e.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},Object.defineProperty($e.prototype,"isSearching",{get:function(){return!!this.searchText.length},enumerable:!0,configurable:!0}),$e.prototype.selectContact=function(e){this.selectContactItem.emit(e)},$e.prototype.clearInput=function(){this.search.setValue("")},$e.prototype.searchContact=function(n){var i=this;if(this.searchText=n,this.searchEvent.emit(n),n&&n.length){this.isLoading=!0;var e=this.gqlVariables.hasOwnProperty("filter")?Object.assign({},this.gqlVariables.filter,{search:n}):{search:n};this.searchContactsGQL.watch({domain:this.gqlVariables.domain,page:1,perPage:1e3,filter:e}).valueChanges.pipe(f.map(function(e){return e.data.contactApps}),f.takeUntil(this.unsubscribe$)).subscribe(function(e){var t=e.items;i.searchList=i.contactsHelper.searchBySymbol(t,n),i.isLoading=!1})}},$e.decorators=[{type:w.Component,args:[{selector:"lib-search-contacts",template:'<div class="bottom-block">\n  <div class="search-field">\n    <div class="input-wrapper">\n      <sr-icon iconName="search" class="search-icon"></sr-icon>\n      <input type="search" placeholder="Search" [formControl]="search" />\n      <sr-button\n        *ngIf="isSearching"\n        buttonType="icon"\n        iconName="cross"\n        (clickHandler)="clearInput()"\n      ></sr-button>\n    </div>\n\n    <ng-container *ngIf="isSearching">\n      <div\n        *ngIf="!isLoading; else showSpinner"\n        class="search-result"\n        #searchContent\n      >\n        <sr-section-list\n          *ngIf="searchList?.length; else notFound"\n          [activeItemId]="(contactsHelper.activeContact | async)?.id"\n          [grouping]="false"\n          [searchText]="searchText"\n          [scrollHeight]="scrollHeight"\n          [listItems]="searchList"\n          (selectListItem)="selectContact($event)"\n        ></sr-section-list>\n      </div>\n\n      <ng-template #notFound>\n        <span class="no-data">No match data ...</span>\n      </ng-template>\n\n      <ng-template #showSpinner>\n        <ion-spinner></ion-spinner>\n      </ng-template>\n    </ng-container>\n  </div>\n</div>\n',styles:[""]}]}],$e.ctorParameters=function(){return[{type:G},{type:de}]},$e.propDecorators={searchContent:[{type:w.ViewChild,args:["searchContent"]}],scrollHeight:[{type:w.Input}],resetSearch:[{type:w.Input}],gqlVariables:[{type:w.Input}],searchEvent:[{type:w.Output}],selectContactItem:[{type:w.Output}]},$e);function $e(e,t){var n=this;this.contactsHelper=e,this.searchContactsGQL=t,this.searchEvent=new w.EventEmitter,this.selectContactItem=new w.EventEmitter,this.search=new h.FormControl(""),this.unsubscribe$=new m.Subject,this.searchText="",this.search.valueChanges.pipe(f.debounceTime(400),f.takeUntil(this.unsubscribe$)).subscribe(function(e){return n.searchContact(e&&e.trim())})}var Te=(He.prototype.ngOnInit=function(){var n=this;this.contactSub$.pipe(f.switchMap(function(t){return n.contactHelper.getActiveDomain().pipe(f.take(1),f.switchMap(function(e){return n.contactByIdGQL.fetch({id:t.id,domain:e})}),f.map(function(e){return e.data.contactAppById}))}),f.filter(function(e){return null!==e})).subscribe(function(e){Object.assign(n.contact,e)})},He.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},He.prototype.fetchLess=function(){this.projectSliceEnd=this.maxVisibleProjects},He.prototype.fetchMore=function(){this.projectSliceEnd=undefined},He.prototype.getFullName=function(e){return e?W([e.first_name,e.name]):""},He.prototype.getField=function(e){return e&&0<e.length?e:" - "},He.prototype.addSeparator=function(e,t){return void 0===t&&(t=","),e&&0<e.length?""+e+(t||""):""},He.prototype.trackByFn=function(e,t){return t.id||e},He.prototype.formatAddress=function(e,t,n,i){return(this.addSeparator(e)+" "+t+" "+n+this.addSeparator(i)).trim().replace(/\s{2,}/," ")},He.prototype.getStatus=function(e){switch(!0){case e.specification:return"Specification";case e.offer:return"Offer";case e.done:return"Done";case e.denied:return"Denied";case e.in_progress:default:return"In progress"}},He.decorators=[{type:w.Component,args:[{selector:"lib-contact-detail",template:'<lib-contact-actions [fullName]="getFullName(contact)"></lib-contact-actions>\n\n<div class="main-info-section">\n  <sr-heading headingText="Contact Details" headingType="h3"></sr-heading>\n\n  <ul class="info-list">\n    <li class="info-list-item">\n      <div class="cell label">Business number</div>\n      <div class="cell value">\n        <sr-text>{{ getField(contact.business_number) }}</sr-text>\n      </div>\n    </li>\n    <li class="info-list-item">\n      <div class="cell label">Mobile number</div>\n      <div class="cell value">\n        <sr-text>{{ getField(contact.mobile_number) }}</sr-text>\n      </div>\n    </li>\n    <li class="info-list-item">\n      <div class="cell label">Private Number</div>\n      <div class="cell value">\n        <sr-text>{{ getField(contact.private_number) }}</sr-text>\n      </div>\n    </li>\n    <li class="info-list-item">\n      <div class="cell label">Fax</div>\n      <div class="cell value">\n        <sr-text>{{ getField(contact.fax) }}</sr-text>\n      </div>\n    </li>\n    <li class="info-list-item">\n      <div class="cell label">Email</div>\n      <div class="cell value">\n        <sr-text>{{ getField(contact.email) }}</sr-text>\n      </div>\n    </li>\n    <li class="info-list-item">\n      <div class="cell label">Website</div>\n      <div class="cell value">\n        <sr-text>{{ getField(contact.website) }}</sr-text>\n      </div>\n    </li>\n    <li class="info-list-item">\n      <div class="cell label">Address</div>\n      <div class="cell value">\n        <sr-text>{{ addSeparator(contact.address) }}</sr-text>\n        <sr-text\n          >{{ contact.postal_code }}\n          {{ contact.city }}\n          {{ contact.po_box ? \',\' : \'\' }}</sr-text\n        >\n        <sr-text>{{ contact.po_box }}</sr-text>\n      </div>\n    </li>\n  </ul>\n  <div class="map-container">\n    <agm-map\n      [latitude]="contact?.geocode_address?.lat"\n      [longitude]="contact?.geocode_address?.lon"\n      [draggable]="false"\n      [panControl]="false"\n      [zoom]="15"\n      [scaleControl]="false"\n      [zoomControl]="false"\n    >\n      <agm-marker\n        [latitude]="contact?.geocode_address?.lat"\n        [longitude]="contact?.geocode_address?.lon"\n      ></agm-marker>\n    </agm-map>\n  </div>\n</div>\n\n<div class="info-section">\n  <header class="section-header">\n    <sr-heading headingText="notes" headingType="h3"></sr-heading>\n    <sr-button buttonType="icon" iconName="add-circle"></sr-button>\n  </header>\n  <div class="section-body">\n    <div class="section-info-field">\n      <div class="field-content">\n        <sr-text [innerHTML]="contact?.memo | nl2br"></sr-text>\n      </div>\n      <sr-actions\n        *ngIf="contact?.memo"\n        [windowWidth]="windowWidth"\n        [data]="actions"\n      ></sr-actions>\n    </div>\n  </div>\n</div>\n\n<div class="info-section">\n  <header class="section-header">\n    <sr-heading headingText="Contact Persons" headingType="h3"></sr-heading>\n    <sr-button buttonType="icon" iconName="add-circle"></sr-button>\n  </header>\n  <div class="section-body">\n    <div\n      class="section-info-field"\n      *ngFor="let c of contact.contacts; trackBy: trackByFn"\n    >\n      <div class="field-content contact">\n        <sr-avatar [avatarValue]="getFullName(c).charAt(0)"></sr-avatar>\n        <div class="info">\n          <sr-link [linkUrl]="\'#/contacts/contact\'">{{\n            getFullName(c)\n          }}</sr-link>\n          <sr-text textType="complementary">{{\n            formatAddress(c.address, c.postal_code, c.city, c.po_box)\n          }}</sr-text>\n        </div>\n      </div>\n      <sr-actions [windowWidth]="windowWidth" [data]="actions"></sr-actions>\n    </div>\n  </div>\n</div>\n\n<div class="info-section">\n  <header class="section-header">\n    <sr-heading headingText="Projects" headingType="h3"></sr-heading>\n    <sr-button buttonType="icon" iconName="add-circle"></sr-button>\n  </header>\n  <div class="section-body">\n    <div\n      class="section-info-field"\n      *ngFor="\n        let project of contact.projects | slice: 0:projectSliceEnd;\n        trackBy: trackByFn\n      "\n    >\n      <div class="field-content project">\n        <div class="icon-wrapper">\n          <sr-icon iconName="case"></sr-icon>\n        </div>\n        <div class="info">\n          <div>\n            <sr-link [linkUrl]="\'#/contacts/contact\'" class="project-name">\n              {{ project.name }} {{ project.description }}\n            </sr-link>\n            <sr-price-label *ngIf="!isMobile">{{\n              project.offer_total | currency: \'EUR\'\n            }}</sr-price-label>\n          </div>\n          <sr-text textType="complementary">\n            <span class="field order">Order-No.: {{ project.order_no }}</span>\n            <span class="divider">/</span>\n            <span class="field responsible"\n              >Responsible:\n              <sr-link [linkUrl]="\'#/contacts/contact\'">{{\n                project.responsible || \'-\'\n              }}</sr-link></span\n            >\n            <span class="divider">/</span>\n            <span class="field status">Status: {{ getStatus(project) }}</span>\n          </sr-text>\n          <sr-price-label *ngIf="isMobile">{{\n            project.offer_total | currency: \'EUR\'\n          }}</sr-price-label>\n        </div>\n      </div>\n      <sr-actions [windowWidth]="windowWidth" [data]="actions"></sr-actions>\n    </div>\n    <div\n      class="button-wrapper"\n      *ngIf="contact?.projects?.length > maxVisibleProjects"\n    >\n      <sr-button\n        (clickHandler)="fetchMore()"\n        *ngIf="projectSliceEnd > 0"\n        buttonText="Show more"\n        buttonType="link"\n      >\n      </sr-button>\n      <sr-button\n        (clickHandler)="fetchLess()"\n        *ngIf="!projectSliceEnd"\n        buttonText="Show less"\n        buttonType="link"\n      >\n      </sr-button>\n    </div>\n  </div>\n</div>\n\n<div class="info-section">\n  <header class="section-header">\n    <sr-heading headingText="Documents" headingType="h3"></sr-heading>\n    <div class="header-actions">\n      <sr-button\n        buttonType="icon"\n        iconName="paste"\n        [isDisabled]="true"\n      ></sr-button>\n      <sr-button buttonType="icon" iconName="new-folder"></sr-button>\n      <sr-button buttonType="icon" iconName="cloud-upload"></sr-button>\n    </div>\n  </header>\n  <div class="section-body">\n    <sr-breadcrumbs [data]="breadcrumbs"></sr-breadcrumbs>\n    <sr-table class="documents-table">\n      <sr-table-row rowType="header-row">\n        <sr-table-cell class="icon-cell" cellType="header-cell"></sr-table-cell>\n        <sr-table-cell\n          class="name-cell"\n          title="Name"\n          cellType="header-cell-sort"\n          sortIcon="up"\n        ></sr-table-cell>\n        <sr-table-cell\n          class="last-modified-cell"\n          title="Last modified"\n          cellType="header-cell"\n        ></sr-table-cell>\n        <sr-table-cell\n          class="size-cell"\n          title="Size"\n          cellType="header-cell"\n        ></sr-table-cell>\n      </sr-table-row>\n      <sr-table-row *ngFor="let row of docs">\n        <sr-table-cell class="icon-cell">\n          <sr-icon [iconName]="row.type"></sr-icon>\n        </sr-table-cell>\n        <sr-table-cell class="name-cell">{{ row.name }}</sr-table-cell>\n        <sr-table-cell class="last-modified-cell">{{\n          row.lastModified\n        }}</sr-table-cell>\n        <sr-table-cell class="size-cell">{{ row.size }}</sr-table-cell>\n        <sr-actions\n          [windowWidth]="windowWidth"\n          [data]="docActions"\n        ></sr-actions>\n      </sr-table-row>\n    </sr-table>\n  </div>\n</div>\n',styles:["agm-map{height:160px}.main-info-section{padding:24px 12px}.main-info-section ::ng-deep .sub-heading{margin-bottom:14px;color:var(--base-gray-48)}.main-info-section .info-list-item:not(:last-child){padding-bottom:9px}.main-info-section .info-list-item .value{color:var(--sr-base-color)}.main-info-section .map-container{margin-top:23px}@media (min-width:768px){agm-map{height:216px}.main-info-section{padding:29px 24px 31px}.main-info-section .info-list-item{display:table-row}.main-info-section .info-list-item:not(:last-child) .cell{padding-bottom:8px}.main-info-section .info-list-item .cell{display:table-cell}.main-info-section .info-list-item .label{padding-right:14px;text-align:right}.main-info-section .map-container{height:216px;margin-top:31px}}"]}]}],He.ctorParameters=function(){return[{type:Ie},{type:G}]},He);function He(e,t){var n=this;this.contactByIdGQL=e,this.contactHelper=t,this.contact={},this.unsubscribe$=new m.Subject,this.maxVisibleProjects=3,this.projectSliceEnd=this.maxVisibleProjects,this.windowWidth=window.innerWidth,this.actions=[{icon:"edit",text:"Edit",handler:function(){return console.log("edit")}},{icon:"delete",text:"Delete",handler:function(){return console.log("delete")}}],this.breadcrumbs=[{type:"item",text:"Root folder",handler:function(){return console.log("Root folder")}},{type:"list",itemsList:[{text:"Macro Debitoren",handler:function(){return console.log("Macro Debitoren")}},{text:"Buildings Debitoren",handler:function(){return console.log("Buildings Debitoren")}},{text:"Old Debitoren",handler:function(){return console.log("Old Debitoren")}}]},{type:"item",text:"Mine korrespondenz",handler:function(){return console.log("Mine korrespondenz")}},{type:"current",text:"Building One"}],this.docs=[{type:"folder",name:"Debitoren",lastModified:"May 22, 2019",size:"12 MB"},{type:"folder",name:"Korrespondenz Korrespondenz vKorrespondenzKorrespondenz",lastModified:"Apr 17, 2019",size:"8 MB"},{type:"folder",name:"Rapporte",lastModified:"Apr 04, 2019",size:"540 KB"},{type:"file",name:"Exception-List.xls",lastModified:"Jun 09, 2018",size:"5 MB"}],this.docActions=[{icon:"cut",text:"Cut",handler:function(){return console.log("Cut")}},{icon:"copy",text:"Copy",handler:function(){return console.log("Copy")}},{icon:"download",text:"Download",handler:function(){return console.log("Download")}},{icon:"edit",text:"Edit",handler:function(){return console.log("Edit")}},{icon:"delete",text:"Delete",handler:function(){return console.log("Delete")}}],this.isMobile=this.contactHelper.isMobile,this.contactSub$=this.contactHelper.activeContact.pipe(f.filter(function(e){return null!==e}),f.distinctUntilChanged(),f.takeUntil(this.unsubscribe$)),this.contactSub$.subscribe(function(e){n.contact?(Object.assign(n.contact,e),n.fetchLess()):n.contact=C({},e)}),this.isMobile&&this.contactHelper.headerData.next({path:"/"+P+"/"+A,title:""})}var Le=(Object.defineProperty(Ne.prototype,"avatarSize",{get:function(){return window.innerWidth<768?36:40},enumerable:!0,configurable:!0}),Object.defineProperty(Ne.prototype,"showContact",{get:function(){return window.innerWidth<768},enumerable:!0,configurable:!0}),Object.defineProperty(Ne.prototype,"showActions",{get:function(){return 767<window.innerWidth},enumerable:!0,configurable:!0}),Ne.decorators=[{type:w.Component,args:[{selector:"lib-contact-actions",template:'<header class="contact-details-header">\n  <div class="contact-base-info">\n    <sr-avatar\n      [avatarValue]="fullName.charAt(0)"\n      [avatarSize]="avatarSize"\n    ></sr-avatar>\n    <sr-heading [headingText]="fullName"></sr-heading>\n  </div>\n\n  <div class="contact-actions" *ngIf="showContact">\n    <sr-menu\n      menuButtonType="icon"\n      iconName="more-vertical"\n      class="contact-actions"\n    >\n      <sr-menu-body>\n        <sr-menu-item\n          [hasCheckMark]="true"\n          itemsPosition="between"\n          class="contact-action"\n        >\n          <sr-icon iconName="file-export"></sr-icon>\n          <sr-text>Export</sr-text>\n        </sr-menu-item>\n        <sr-menu-item\n          [hasCheckMark]="true"\n          itemsPosition="between"\n          class="contact-action"\n        >\n          <sr-icon iconName="print"></sr-icon>\n          <sr-text>Print</sr-text>\n        </sr-menu-item>\n        <sr-menu-item\n          [hasCheckMark]="true"\n          itemsPosition="between"\n          class="contact-action"\n        >\n          <sr-icon iconName="edit"></sr-icon>\n          <sr-text>Edit</sr-text>\n        </sr-menu-item>\n        <sr-menu-item [hasCheckMark]="true" class="contact-action">\n          <sr-icon iconName="delete"></sr-icon>\n          <sr-text>Delete</sr-text>\n        </sr-menu-item>\n      </sr-menu-body>\n    </sr-menu>\n  </div>\n\n  <div class="contact-actions" *ngIf="showActions">\n    <sr-button buttonType="icon" iconName="file-export"></sr-button>\n    <sr-button buttonType="icon" iconName="print"></sr-button>\n    <sr-button buttonType="icon" iconName="edit"></sr-button>\n    <sr-button buttonType="icon" iconName="delete"></sr-button>\n    <span class="divider"></span>\n    <sr-button buttonType="icon" iconName="three-column-view"></sr-button>\n  </div>\n</header>\n',styles:[".contact-details-header{display:flex;align-items:center;justify-content:space-between;padding:13px 12px 10px;border-bottom:1px solid var(--sr-border-color)}.contact-details-header sr-avatar{margin-right:8px}.contact-details-header sr-heading{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.contact-details-header ::ng-deep .heading{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.contact-base-info{display:flex;align-items:center;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.contact-action sr-icon{margin-right:16px;color:var(--base-gray-64)}@media (min-width:768px){.contact-details-header{padding:16px 16px 16px 24px}.contact-details-header sr-avatar{margin-right:12px}.contact-details-header sr-button{margin-left:8px}.contact-details-header .divider{width:1px;margin-left:8px;background:var(--sr-border-color)}.contact-details-header .contact-actions{display:flex}}"]}]}],Ne.ctorParameters=function(){return[]},Ne.propDecorators={fullName:[{type:w.Input}]},Ne);function Ne(){}var _e=(Oe.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},Object.defineProperty(Oe.prototype,"getText",{get:function(){return this.isDesktop?this.policy:this.privacy},enumerable:!0,configurable:!0}),Object.defineProperty(Oe.prototype,"buttonText",{get:function(){return this.isDesktop?this.service:this.terms},enumerable:!0,configurable:!0}),Object.defineProperty(Oe.prototype,"getHelpText",{get:function(){return this.isDesktop?this.center:this.help},enumerable:!0,configurable:!0}),Oe.prototype.getLanguages=function(){var t=this;this.languages$=this.appService.getLanguages().pipe(f.takeUntil(this.unsubscribe$)),this.appService.getActiveLanguage().pipe(f.takeUntil(this.unsubscribe$)).subscribe(function(e){t.activeLanguage=e})},Oe.prototype.getHelpCenter=function(e){this.linkRedirect.redirect(e,this.helpCenter)},Oe.prototype.handleChangeLanguage=function(t){return M(this,void 0,void 0,function(){return j(this,function(e){return t===this.activeLanguage?[2,null]:(this.appService.changeLanguage(t),[2])})})},Oe.prototype.uppercase=function(e){return e.charAt(0).toUpperCase()+e.substr(1,e.length-1).toLowerCase()},Oe.decorators=[{type:w.Component,args:[{selector:"lib-footer",template:'<sr-footer *ngIf="!isMobile">\n  <div class="row">\n    <div class="col xs-4 m-4 l-5">\n      <sr-text class="copyright">&copy; 2019 Sorba</sr-text>\n    </div>\n    <div class="col xs-8 m-4 l-5 last-m">\n      <sr-buttons-group buttonsPosition="end">\n        <sr-link linkColor="gray" linkSize="small" [linkUrl]="privacyPolicy">{{\n          getText\n        }}</sr-link>\n        \x3c!--        <sr-link linkColor="gray" linkSize="small">--\x3e\n        \x3c!--          {{isDesktop ? \'Terms of Service\' : \'Terms\'}}--\x3e\n        \x3c!--        </sr-link>--\x3e\n        <lib-terms-button [buttonText]="buttonText"></lib-terms-button>\n        <sr-link\n          linkColor="gray"\n          linkSize="small"\n          (click)="getHelpCenter($event)"\n          >{{ getHelpText }}</sr-link\n        >\n      </sr-buttons-group>\n    </div>\n    <div class="col m-4 l-2">\n      <sr-buttons-group buttonsPosition="center">\n        <sr-menu\n          menuButtonType="text"\n          xPosition="after"\n          yPosition="above"\n          [buttonText]="uppercase(activeLanguage)"\n          iconName="language"\n          customMenuClass="languages footer-menu"\n        >\n          <sr-menu-body>\n            <sr-menu-item\n              *ngFor="let language of languages$ | async"\n              [hasCheckMark]="true"\n              (click)="handleChangeLanguage(language)"\n              [class.active]="language === activeLanguage"\n              itemsPosition="between"\n            >\n              <sr-text>{{ uppercase(language) }}</sr-text>\n            </sr-menu-item>\n          </sr-menu-body>\n        </sr-menu>\n      </sr-buttons-group>\n    </div>\n  </div>\n</sr-footer>\n',styles:[""]}]}],Oe.ctorParameters=function(){return[{type:J},{type:G},{type:undefined,decorators:[{type:w.Inject,args:["appService"]}]}]},Oe);function Oe(e,t,n){this.linkRedirect=e,this.contactsHelper=t,this.appService=n,this.isMobile=this.contactsHelper.isMobile,this.isDesktop=this.contactsHelper.isDesktop,this.privacyPolicy="#/"+_,this.helpCenter=E,this.privacy="Privacy",this.policy="Privacy Policy",this.service="Terms of Service",this.terms="Terms",this.center="Help Center",this.help="Help",this.activeLanguage="",this.unsubscribe$=new m.Subject,this.getLanguages()}var Ee=(qe.prototype.openTermsOfService=function(){var t=this,e=this.file.applicationDirectory+"www/assets/docs",n="2019_AGB_SORBA_EDV_AG.pdf",i="application/pdf";if(this.platformHelper.isIOS())this.document.viewDocument(e+"/"+n,i,{});else if(this.platformHelper.isAndroid()){var o=Date.now();this.file.copyFile(e,n,this.file.dataDirectory,o+".pdf").then(function(e){t.fileOpener.open(e.nativeURL,i)["catch"](function(e){return console.log(e)})})}},qe.decorators=[{type:w.Component,args:[{selector:"lib-terms-button",template:'<sr-button\n  *ngIf="!platformHelper.isDesktop()"\n  buttonType="text"\n  (clickHandler)="openTermsOfService()"\n  >{{ buttonText }}</sr-button\n>\n<sr-link\n  *ngIf="platformHelper.isDesktop()"\n  (click)="linkRedirect.redirect($event, termsOfService)"\n  linkColor="gray"\n  linkSize="small"\n>\n  {{ buttonText }}\n</sr-link>\n',styles:[""]}]}],qe.ctorParameters=function(){return[{type:J},{type:b.DocumentViewer},{type:g.File},{type:y.FileOpener},{type:Z}]},qe.propDecorators={buttonText:[{type:w.Input}]},qe);function qe(e,t,n,i,o){this.linkRedirect=e,this.document=t,this.file=n,this.fileOpener=i,this.platformHelper=o,this.termsOfService=O}var Be=(Fe.prototype.transform=function(e,t,n){return n&&e&&e.length&&e.length>t?e.substr(0,t)+" ...":e},Fe.decorators=[{type:w.Pipe,args:[{name:"stringLimit"}]}],Fe);function Fe(){}var ze=(Ve.prototype.transform=function(e){if("string"!=typeof e||""===e)return e;var t=e.replace(/(\r\n|\r|\n|\\r\\n|\\r|\\n)/g,"<br />");return this.sanitizer.sanitize(w.SecurityContext.HTML,t)},Ve.decorators=[{type:w.Pipe,args:[{name:"nl2br"}]}],Ve.ctorParameters=function(){return[{type:x.DomSanitizer}]},Ve);function Ve(e){this.sanitizer=e}var Ue=(Re.decorators=[{type:w.NgModule,args:[{imports:[c.SorbaUiComponentsModule,u.IonicModule,l.CommonModule,v.ScrollingModule,h.ReactiveFormsModule,p.AgmCoreModule.forRoot({apiKey:"AIzaSyBfnFP4_clqP63H0yaEUIEc84FhGK8y1Ng"})],exports:[c.SorbaUiComponentsModule,u.IonicModule,l.CommonModule,h.ReactiveFormsModule,Pe,De,je,Te,Le,_e,Ee,Be,ze],declarations:[Pe,De,je,Te,Le,_e,Ee,Be,ze],providers:[G,Q]}]}],Re);function Re(){}var We=(Ge.decorators=[{type:w.Component,args:[{selector:"lib-root-contact",template:'\n    <lib-header></lib-header>\n    <sr-content>\n      <sr-container noPadding="horizontal-top">\n        <router-outlet></router-outlet>\n      </sr-container>\n\n      <lib-footer></lib-footer>\n    </sr-content>\n  '}]}],Ge);function Ge(){}var Ke=[{path:"",component:We,children:[{path:"contact",component:Ce},{path:":id",component:Te},{path:"**",redirectTo:"contact"}]},{path:"**",redirectTo:""}],Qe=(Ye.decorators=[{type:w.NgModule,args:[{declarations:[Ce,We],exports:[Ce,We],imports:[Ue,d.RouterModule.forChild(Ke)]}]}],Ye);function Ye(){}e.ContactsModule=Qe,e.ɵk=Le,e.ɵj=Te,e.ɵl=_e,e.ɵg=Pe,e.ɵh=De,e.ɵi=je,e.ɵm=Ee,e.ɵo=ze,e.ɵn=Be,e.ɵb=G,e.ɵd=Q,e.ɵf=Ue,e.ɵa=Ce,e.ɵc=se,e.ɵe=We,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=contacts.umd.min.js.map